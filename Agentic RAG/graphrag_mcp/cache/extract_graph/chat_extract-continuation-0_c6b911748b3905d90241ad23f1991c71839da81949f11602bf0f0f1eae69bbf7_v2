{"result": {"id": "chatcmpl-ByDyYfcAHiO4JSsqJOuSHA3ATkKtB", "choices": [{"finish_reason": "stop", "index": 0, "logprobs": null, "message": {"content": "(\"entity\"<|>CHINA<|>GEO<|>China is the country where the domestic reverse proxy address is used for the Mini DeepResearch project<|>7)\n##\n(\"entity\"<|>JUPYTER<|>ORGANIZATION<|>Jupyter is a tool used for testing code in the Mini DeepResearch project<|>6)\n##\n(\"entity\"<|>PYTHON<|>ORGANIZATION<|>Python is the programming language used in the Mini DeepResearch project<|>6)\n##\n(\"entity\"<|>CHATBOT<|>ORGANIZATION<|>ChatBot is a module in the Mini DeepResearch project that can be run using Python<|>6)\n##\n(\"relationship\"<|>MINI DEEPRESEARCH<|>CHINA<|>Mini DeepResearch uses a domestic reverse proxy address in China<|>7)\n##\n(\"relationship\"<|>MINI DEEPRESEARCH<|>JUPYTER<|>Jupyter is used for testing code in the Mini DeepResearch project<|>6)\n##\n(\"relationship\"<|>MINI DEEPRESEARCH<|>PYTHON<|>Python is the programming language used in the Mini DeepResearch project<|>6)\n##\n(\"relationship\"<|>MINI DEEPRESEARCH<|>CHATBOT<|>ChatBot is a module that can be run in the Mini DeepResearch project<|>6)\n<|COMPLETE|>", "refusal": null, "role": "assistant", "annotations": [], "audio": null, "function_call": null, "tool_calls": null}}], "created": 1753693102, "model": "gpt-4o-2024-08-06", "object": "chat.completion", "service_tier": "default", "system_fingerprint": "fp_a288987b44", "usage": {"completion_tokens": 309, "prompt_tokens": 3345, "total_tokens": 3654, "completion_tokens_details": {"accepted_prediction_tokens": 0, "audio_tokens": 0, "reasoning_tokens": 0, "rejected_prediction_tokens": 0}, "prompt_tokens_details": {"audio_tokens": 0, "cached_tokens": 3200}}}, "input": {"messages": [{"content": "\n-Goal-\nGiven a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.\n \n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: One of the following types: [organization,person,geo,event]\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n \n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\n Format each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n \n3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n \n4. When finished, output <|COMPLETE|>\n \n######################\n-Examples-\n######################\nExample 1:\nEntity_types: ORGANIZATION,PERSON\nText:\nThe Verdantis's Central Institution is scheduled to meet on Monday and Thursday, with the institution planning to release its latest policy decision on Thursday at 1:30 p.m. PDT, followed by a press conference where Central Institution Chair Martin Smith will take questions. Investors expect the Market Strategy Committee to hold its benchmark interest rate steady in a range of 3.5%-3.75%.\n######################\nOutput:\n(\"entity\"<|>CENTRAL INSTITUTION<|>ORGANIZATION<|>The Central Institution is the Federal Reserve of Verdantis, which is setting interest rates on Monday and Thursday)\n##\n(\"entity\"<|>MARTIN SMITH<|>PERSON<|>Martin Smith is the chair of the Central Institution)\n##\n(\"entity\"<|>MARKET STRATEGY COMMITTEE<|>ORGANIZATION<|>The Central Institution committee makes key decisions about interest rates and the growth of Verdantis's money supply)\n##\n(\"relationship\"<|>MARTIN SMITH<|>CENTRAL INSTITUTION<|>Martin Smith is the Chair of the Central Institution and will answer questions at a press conference<|>9)\n<|COMPLETE|>\n\n######################\nExample 2:\nEntity_types: ORGANIZATION\nText:\nTechGlobal's (TG) stock skyrocketed in its opening day on the Global Exchange Thursday. But IPO experts warn that the semiconductor corporation's debut on the public markets isn't indicative of how other newly listed companies may perform.\n\nTechGlobal, a formerly public company, was taken private by Vision Holdings in 2014. The well-established chip designer says it powers 85% of premium smartphones.\n######################\nOutput:\n(\"entity\"<|>TECHGLOBAL<|>ORGANIZATION<|>TechGlobal is a stock now listed on the Global Exchange which powers 85% of premium smartphones)\n##\n(\"entity\"<|>VISION HOLDINGS<|>ORGANIZATION<|>Vision Holdings is a firm that previously owned TechGlobal)\n##\n(\"relationship\"<|>TECHGLOBAL<|>VISION HOLDINGS<|>Vision Holdings formerly owned TechGlobal from 2014 until present<|>5)\n<|COMPLETE|>\n\n######################\nExample 3:\nEntity_types: ORGANIZATION,GEO,PERSON\nText:\nFive Aurelians jailed for 8 years in Firuzabad and widely regarded as hostages are on their way home to Aurelia.\n\nThe swap orchestrated by Quintara was finalized when $8bn of Firuzi funds were transferred to financial institutions in Krohaara, the capital of Quintara.\n\nThe exchange initiated in Firuzabad's capital, Tiruzia, led to the four men and one woman, who are also Firuzi nationals, boarding a chartered flight to Krohaara.\n\nThey were welcomed by senior Aurelian officials and are now on their way to Aurelia's capital, Cashion.\n\nThe Aurelians include 39-year-old businessman Samuel Namara, who has been held in Tiruzia's Alhamia Prison, as well as journalist Durke Bataglani, 59, and environmentalist Meggie Tazbah, 53, who also holds Bratinas nationality.\n######################\nOutput:\n(\"entity\"<|>FIRUZABAD<|>GEO<|>Firuzabad held Aurelians as hostages)\n##\n(\"entity\"<|>AURELIA<|>GEO<|>Country seeking to release hostages)\n##\n(\"entity\"<|>QUINTARA<|>GEO<|>Country that negotiated a swap of money in exchange for hostages)\n##\n##\n(\"entity\"<|>TIRUZIA<|>GEO<|>Capital of Firuzabad where the Aurelians were being held)\n##\n(\"entity\"<|>KROHAARA<|>GEO<|>Capital city in Quintara)\n##\n(\"entity\"<|>CASHION<|>GEO<|>Capital city in Aurelia)\n##\n(\"entity\"<|>SAMUEL NAMARA<|>PERSON<|>Aurelian who spent time in Tiruzia's Alhamia Prison)\n##\n(\"entity\"<|>ALHAMIA PRISON<|>GEO<|>Prison in Tiruzia)\n##\n(\"entity\"<|>DURKE BATAGLANI<|>PERSON<|>Aurelian journalist who was held hostage)\n##\n(\"entity\"<|>MEGGIE TAZBAH<|>PERSON<|>Bratinas national and environmentalist who was held hostage)\n##\n(\"relationship\"<|>FIRUZABAD<|>AURELIA<|>Firuzabad negotiated a hostage exchange with Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>AURELIA<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>FIRUZABAD<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>ALHAMIA PRISON<|>Samuel Namara was a prisoner at Alhamia prison<|>8)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>MEGGIE TAZBAH<|>Samuel Namara and Meggie Tazbah were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>DURKE BATAGLANI<|>Samuel Namara and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>DURKE BATAGLANI<|>Meggie Tazbah and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>FIRUZABAD<|>Samuel Namara was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>FIRUZABAD<|>Meggie Tazbah was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>DURKE BATAGLANI<|>FIRUZABAD<|>Durke Bataglani was a hostage in Firuzabad<|>2)\n<|COMPLETE|>\n\n######################\n-Real Data-\n######################\nEntity_types: organization,person,geo,event\nText: 实践和发展路径。\n\n---\n\n## 参考文献与进一步阅读\n\n1. [模型上下文协议（Wikipedia）](https://zh.wikipedia.org/wiki/%E6%A8%A1%E5%9E%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8D%8F%E8%AE%AE)\n2. [Model Context Protocol 官方文档](https://modelcontextprotocol.info/zh-cn/docs/introduction/)\n3. [有关 MCP 在 AI 集成中的应用探讨](https://blog.eimoon.com/p/mcp-introduction/?utm_source=openai)\n\n---\n\n*注：本文主要聚焦于 MCP 作为一项开放标准协议的技术体系，不同领域中同样缩写为 MCP 的其他技术（如多芯片封装、微通道板）则属于截然不同的技术体系，读者在查阅相关文献时需注意区分。*\n```\n\n- 课件领取\n\nMini DeepResearch公开课资料见本节公开课网盘：\n\n\n\n\n\n\n\n- Mini DeepResearch技术栈\n\n​\tMini DeepResearch以OpenAI模型及开源Agents SDK框架为主进行的开发，实际运行过程中需要输入OpenAI API-KEY。OpenAI API-KEY获取方法详见课件中的参考资料《OpenAI注册指南》部分，此外也可以直接在某宝上购买官方API-KEY。此外，项目中自带国内反向代理地址，无需额外网络门槛即可使用。\n\n> 需要注意的是，必须要使用OpenAI官方API-KEY才能运行项目，中转API-KEY无法运行。\n\n- Mini DeepResearch命令行快速上手使用\n\n​\t在课件中下载MiniDeepResearch.zip压缩包并解压缩，然后即可在主目录下运行该项目：\n\n\n\n需要提前安装openai库和agents库\n\n```bash\npip install openai openai-agents\n```\n\n并且在三个_agent.py文件中写入国内反向代理地址和OpenAI官方API-KEY，然后输入如下命令即可运行：\n\n```bash\npython -m ChatBot.main\n```\n\n#### 2.2 Mini DeepResearch项目架构介绍\n\n​\t接下来让我们快速回顾这个Multi-Agent系统核心代码结构。Mini DeepResearch主要由三个Agent构成：\n\n| Agent           | 功能                                    |\n| --------------- | --------------------------------------- |\n| `planner_agent` | 生成研究关键词和搜索策略                |\n| `search_agent`  | 负责执行网络搜索 + 总结内容（使用工具） |\n| `writer_agent`  | 汇总所有搜索结果，编写报告              |\n\n并且实际运行过程中，三个Agent组成一个线性的workflow进行运行：\n\n\n\n这其实是一个相对简单的Multi-Agent系统，并且在最新GPT-4.1和o4-mini模型加持下，以及搭配开源的Agents-SDK框架和GPT模型原生的网络搜索功能，能够非常高效稳定的实现类DeepResearch功能。\n\n​\t接下来我们逐个介绍这三个Agent代码实现。以下代码均在Jupyter中完成测试，代码课件详见：\n\n\n\n\n\n\n\n#### 2.3 planner_agent功能实现\n\n- 基础依赖库安装\n\n```bash\npip install openai openai-agents\n```\n\n- 基础代码测试\n\n​\t这里首先需要设置基础Agents-SDK开发环境并进行简单测试，测试代码如下：\n\n```python\nfrom openai import AsyncOpenAI\nfrom agents import OpenAIChatCompletionsModel,Agent,Runner,set_default_openai_client, set_tracing_disabled\nfrom agents.model_settings import ModelSettings\nfrom pydantic import BaseModel\nfrom agents import Agent, WebSearchTool\nfrom agents.model_settings import ModelSettings\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(override=True)\n\nexternal_client = AsyncOpenAI(\n    base_url = os.getenv(\"BASE_URL\"),\n    api_key = os.getenv(\"API_KEY\"), \n)\nset_default_openai_client(external_client)\nset_tracing_disabled(True)\nagent = Agent(name=\"Assistant\", instructions=\"你是一名助人为乐的助手。\")\nresult = await Runner.run(agent, \"请写一首关于编程中递归的俳句。\") \nprint(result.final_output)\n```\n\n这里需要在base_url中填写国内反向代理地址，需要在api_key中填写OpenAI的API-KEY。实际运行结果如下：\n\n\n\n- planner_agent代码\n######################\nOutput:", "role": "user"}, {"role": "assistant", "content": "(\"entity\"<|>MINI DEEPRESEARCH<|>ORGANIZATION<|>Mini DeepResearch is a project that uses OpenAI models and open-source Agents SDK framework for development, requiring an OpenAI API-KEY for operation<|>9)\n##\n(\"entity\"<|>OPENAI<|>ORGANIZATION<|>OpenAI is an AI research organization that provides API-KEYs necessary for running the Mini DeepResearch project<|>9)\n##\n(\"entity\"<|>AGENTS SDK<|>ORGANIZATION<|>Agents SDK is an open-source framework used in the Mini DeepResearch project for developing multi-agent systems<|>8)\n##\n(\"entity\"<|>GPT-4.1<|>ORGANIZATION<|>GPT-4.1 is a version of the GPT model used in the Mini DeepResearch project<|>8)\n##\n(\"entity\"<|>O4-MINI<|>ORGANIZATION<|>O4-mini is a model used in the Mini DeepResearch project<|>8)\n##\n(\"entity\"<|>PLANNER_AGENT<|>ORGANIZATION<|>Planner Agent is a component of the Mini DeepResearch project responsible for generating research keywords and search strategies<|>7)\n##\n(\"entity\"<|>SEARCH_AGENT<|>ORGANIZATION<|>Search Agent is a component of the Mini DeepResearch project responsible for executing web searches and summarizing content<|>7)\n##\n(\"entity\"<|>WRITER_AGENT<|>ORGANIZATION<|>Writer Agent is a component of the Mini DeepResearch project responsible for compiling all search results and writing reports<|>7)\n##\n(\"relationship\"<|>MINI DEEPRESEARCH<|>OPENAI<|>Mini DeepResearch requires an OpenAI API-KEY to operate<|>9)\n##\n(\"relationship\"<|>MINI DEEPRESEARCH<|>AGENTS SDK<|>Mini DeepResearch uses the Agents SDK framework for development<|>8)\n##\n(\"relationship\"<|>MINI DEEPRESEARCH<|>GPT-4.1<|>Mini DeepResearch uses the GPT-4.1 model<|>8)\n##\n(\"relationship\"<|>MINI DEEPRESEARCH<|>O4-MINI<|>Mini DeepResearch uses the O4-mini model<|>8)\n##\n(\"relationship\"<|>MINI DEEPRESEARCH<|>PLANNER_AGENT<|>Planner Agent is a part of the Mini DeepResearch project<|>7)\n##\n(\"relationship\"<|>MINI DEEPRESEARCH<|>SEARCH_AGENT<|>Search Agent is a part of the Mini DeepResearch project<|>7)\n##\n(\"relationship\"<|>MINI DEEPRESEARCH<|>WRITER_AGENT<|>Writer Agent is a part of the Mini DeepResearch project<|>7)\n<|COMPLETE|>"}, {"content": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n", "role": "user"}], "parameters": {"model": "gpt-4o", "frequency_penalty": 0.0, "max_tokens": null, "n": 1, "presence_penalty": 0.0, "temperature": 0.0, "top_p": 1.0}}, "key": "chat_extract-continuation-0_c6b911748b3905d90241ad23f1991c71839da81949f11602bf0f0f1eae69bbf7_v2"}